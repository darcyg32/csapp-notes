### Core Idea
- The processor executes programs by reading and interpreting instructions stored in main memory.
- Understanding how this works requires knowing the basic hardware organization of a computer system.

---
### 1.4.1 - Hardware Organization of a System
**Buses**
- Buses: Electrical pathways that transfer data between components.
- Carry information in fixed-size chunks called words.
- Word size: Number of bytes per word (commonly 4 byes = 32-bit, or 8 bytes = 62-bit).
- A fundamental system parameter. Affects data size and addressing.

**I/O Devices**
- Input/Output devices connect the system to the outside world (keyboard, mouse, display, disk, etc).
- Each device connects to the I/O bus via a controller or adapter:
	- **Controller**: Built into the device or motherboard.
	- **Adapter**: A separate card plugged into the motherboard.
- **Purpose**: Transfer data between device and system bus.
- Example: The `hello` program initially resides on disk before being loaded into memory.

**Main Memory**
- Main Memory (DRAM): Temporary storage for programs and data currently in use.
- Organized as a linear array of bytes, each with a unique address (starting from 0).
- Stores both instructions and data.
- Typical data sizes on x86-64:
	- `short`: 2 bytes
	- `int`, `float`: 4 bytes
	- `long`, `double`: 8 bytes

**Processor (CPU)**
- CPU: Executes instructions stored in memory.
- Program Counter (PC): Register storing the address of the current instruction.
- Continuously:
	1. Reads instructions from memory at PC.
	2. Interprets and executes it.
	3. Updates PC to the next instruction.

**Basic CPU Components**
- Register File: Small set of fast storage registers.
- ALU (Arithmetic/Logic Unit): Performs arithmetic and logic operations.

**Basic Instruction Operations**
- **Load**: Copy data from memory --> register.
- **Store**: Copy data from register --> memory.
- **Operate**: Perform arithmetic or logic on register values.
- **Jump**: Change the PC to a new instruction address.

**Architecture vs Microarchitecture**
- **Instruction Set Architecture (ISA)**: Defines what instructions do. It's the abstract model seen by programmers.
- **Microarchitecture**: The actual hardware implementation of the ISA.
- Modern CPUs use complex microarchitectures to improve performance, even though they appear to follow a simple sequential model.

---
### 1.4.2 - Running the `hello` Program
**Step-by-Step Overview**
1. **Shell Execution**
	- The shell (command-line interpreter) waits for user input.
	- Typing `./hello` tells the shell to load and execute the `hello` program.
2. **Loading the Program**
	- The shell copies the program's code and data from disk to main memory.
	- Uses **Direct Memory Access (DMA)**: Data moves from disk --> memory without CPU involvement.
3. **Program Execution**
	- The CPU starts executing the program's instructions from memory.
	- The instructions copy the string `"hello, world\n"` from memory --> registers --> display device.
	- The message appears on screen.

---
### Key Definitions
- **Shell**: Command-line interpreter that executes user commands.
- **Bus**: Electrical system for data transfer between components.
- **Word**: Fixed-size data unit (e.g., 32-bit or 64-bit).
- **Main Memory (DRAM)**: Temporary working storage for code and data.
- **Program Counter (PC)**: Register that tracks the current instruction's address.
- **Register File**: Collection of small, fast storage registers in the CPU.
- **ALU**: Arithmetic/Logic Unit; performs computations.
- **DMA (Direct Memory Access**: Hardware mechanism allowing data to move between I/O and memory without CPU intervention.
- **Instruction Set Architecture (ISA)**: Defines the CPU's instruction behaviour visible to software.
- **Microarchitecture**: Physical implementation of the ISA.

---
![[Pasted image 20251111124154.png]]
![[Pasted image 20251111124209.png]]
![[Pasted image 20251111124225.png]]
![[Pasted image 20251111124229.png]]