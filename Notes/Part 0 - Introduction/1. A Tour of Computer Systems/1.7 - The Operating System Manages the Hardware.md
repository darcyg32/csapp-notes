#### Core Idea
- The operating system (OS) is a software layer between applications and hardware.
- It ensures **hardware protection** and provides **simple, uniform interfaces** for managing devices and memory.

#### Main Purposes of an OS
1. **Protect hardware** from misuse by applications.
2. **Provide abstractions** that simplify hardware interaction:
	- **Processes** --> abstraction of CPU, memory, and I/O.
	- **Virtual Memory** --> abstraction of main memory and disk.
	- **Files** --> abstraction of I/O devices.

---
### 1.7.1 - Processes
- **Definition**: A process is the OS's abstraction of a running program.
	- Each process has the illusion of exclusive use of CPU, memory, and I/O devices.
- **Concurrency**: Multiple processes appear to run simultaneously via context switching (the OS saves and restores process states).
- **Context**: Includes values of registers, program counter (PC), and memory contents.
- **Kernel**: Core part of the OS that manages processes and handles **system calls** (requests from applications to the OS).
	- When you run `./hello`, the shell process calls the kernel, which:
		- Saves the shell's context.
		- Creates the hello process.
		- Runs it.
		- Restores the shell after hello exits.

---
### 1.7.2 - Threads
- **Definition**: A thread is an execution unit within a process.
- Threads share code and data but have independent control flows.
- Advantages:
	- Easier data sharing that between processes.
	- More efficient and responsive.
	- Enable concurrency on multicore CPUs.
- **Use case**: Common in network servers and concurrent programs.

---
### 1.7.3 - Virtual Memory
- **Definition**: A virtual memory system gives each process the illusion of having its own private memory space.
- **Virtual Address Space (VAS)**: Each process sees a uniform memory layout, even though data is shared and stored in both RAM and disk.

**Memory Layout (Linux Example)**

| Region                  | Description                                                              |
| ----------------------- | ------------------------------------------------------------------------ |
| **Program Code & Data** | Loaded directly from the executable file (e.g., `hello`)                 |
| **Heap**                | Dynamically grows/shrinks (via `malloc` and `free`)                      |
| **Shared Libraries**    | Contains code/data for libraries.                                        |
| **Stack**               | Grows/shrinks with function calls. Used for local vars and control flow. |
| **Kernel Space**        | Reserved for OS kernel; inaccessible to user programs.                   |
- **Implementation**: The OS and hardware cooperate. Main memory acts as a **cache for disk** storage of virtual memory contents.

---
### 1.7.4 - Files
- **Definition**: A **file** is a sequence of bytes used to represent all I/O devices.
- **Unified I/O Model**: All input/output (disk, keyboard, display, network) is done through reading/writing files via Unix I/O system calls.
- **Advantages**:
	- Simplifies programming (same interface for all devices).
	- Improves portability across systems.

---
### Takeaways
- The OS provides three key abstractions: processes, virtual memory, and files.
- These abstractions:
	- Protect hardware resources.
	- Simplify programming.
	- Enable concurrency and system security.

---
![[Pasted image 20251112121309.png]]
![[Pasted image 20251112121315.png]]
![[Pasted image 20251112121331.png]]
![[Pasted image 20251112121337.png]]
